<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" href="styleSheet.css">
</head>

<title> Monty Hall Problem</title>
<div>
    <!-- Latest compiled and minified CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">

    <!-- jQuery library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

    <!-- Latest compiled JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3"
        crossorigin="anonymous"></script>

    <script src="pixi.min.js"></script>
</div>


<div style="background-color: teal;padding-bottom: 5px; border-bottom: 6px solid black;">
    <h1 class="centerText">Monty Hall Problem</h1>
    <p>INFO ICON HERE</p>
</div>

<script>
    const carImg = "images/car.png";
    const goatImg = "images/goat.png";
    const doorImg = "images/ClosedDoor.png";
    var Doors = [0, 0, 0];
    var carLocation = Math.floor(Math.random() * 3);
    Doors[carLocation] = 1;
    var gamesPlayed = 0;
    var gamesWon = 0;
    var gamesLost = 0;
    var keptDoor = 0;
    var switchDoors = 0;
    var switchDoorGames = 0;
    var keptDoorsGames = 0;
    var keptDoorLost = 0;
    var switchDoorLost = 0;
    var isKept = false;
    var choiceMade = 0;
</script>


<div style="background-color: aquamarine; padding-bottom: 20px;">
    <div class="row" style="width: 80%;margin-left: 15%;padding-bottom: 20px; padding-top: 20px;">
        <div class="col-lg-4 col-md-4 col-xs-4 thumb">

            <img class="img-responsive" src=doorImg width="300px" height="400px" alt="Door 1" id="door0">
            <button onclick="chooseDoor(0)" class="btns" id="buttonDoor0"> Door 1</button>

        </div>
        <div class="col-lg-4 col-md-4 col-xs-4 thumb">

            <img class="img-responsive" src=doorImg width="300px" height="400px" alt="Door 2" id="door1">
            <button onclick="chooseDoor(1)" class="btns" id="buttonDoor1"> Door 2</button>

        </div>
        <div class="col-lg-4 col-md-4 col-xs-4 thumb">

            <img class="img-responsive" src=doorImg width="300px" height="400px" alt="Door 3" id="door2">
            <button onclick="chooseDoor(2)" class="btns" id="buttonDoor2"> Door 3</button>
        </div>
    </div>
</div>


<div class="statsSection">
    <h1 class="centerText"> Statistics For Game </h1>
    <div class="text-center">
        <button type="button" class="btn btn-primary" onclick="resetStats()">Reset Stats</button>
        <button type="button" class="btn btn-primary" onclick="playAgain()">Play Again</button>
        <input type="text" id="amountTimesToRun" placeholder="Number of Runs">
        <button type="button" class="btn btn-primary" onclick="simulateGame()">Simulate Runs</button>
        <!-- Button trigger modal -->
        <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal">
            Launch demo modal
        </button>
    </div>
    <div class="row" style="text-align: center;">
        <div class="col-md-4">
            <h3 id="gamesPlayed">Total Games Played: 0 </h3>
            <h3 id="gamesWon">Total Games Won: 0</h3>
            <h3 id="gamesLost">Total Games Lost: 0</h3>
        </div>
        <div class="col-md-4">
            <h3 id="switchDoorsGames">Total games where switched door: 0</h3>
            <h3 id="switchDoorsWon"> Switched doors and won: 0</h3>
            <h3 id="switchDoorsLose">Switched doors and lost: 0</h3>
        </div>
        <div class="col-md-4">
            <h3 id="keptDoorsGames">Total Games where kept door: 0 </h3>
            <h3 id="keptDoorsWon"> Kept door and won: 0</h3>
            <h3 id="keptDoorsLose">Kept door and lost: 0 </h3>
        </div>
    </div>
</div>

<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Would you like to keep or switch doors?</h5>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal"
                        onclick="determineKeep(0)">Switch</button>
                    <button type="button" class="btn btn-primary" data-bs-dismiss="modal"
                        onclick="determineKeep(1)">Keep</button>
                </div>
            </div>
        </div>
    </div>


    <script>
        document.getElementById("door0").src = doorImg;
        document.getElementById("door1").src = doorImg;
        document.getElementById("door2").src = doorImg;

        function testModal(stringToAlert) {
            window.alert("The string sent was: " + stringToAlert);
        }

        var string = "Door Zero: " + Doors[0] + "-- Door One: " + Doors[1] + "-- Door Two: " + Doors[2];

        function playAgain() {

            //$('#exampleModal').modal('show'); //reveals the modal without button being clicked
            Doors[0] = 0;
            Doors[1] = 0;
            Doors[2] = 0;

            carLocation = Math.floor(Math.random() * 3);
            Doors[carLocation] = 1;

            document.getElementById("door0").src = doorImg;
            document.getElementById("door1").src = doorImg;
            document.getElementById("door2").src = doorImg;
            document.getElementById("buttonDoor0").disabled = false;
            document.getElementById("buttonDoor1").disabled = false;
            document.getElementById("buttonDoor2").disabled = false;

        } //end of play again


        function determineKeep(number) {
            if (number == 0)
                isKept = true;
            else
                isKept = false;

            choiceMade = 1;
        }

        function chooseDoor(x) {

            //while(choiceMade != 1){
           // $('#exampleModal').modal('show'); //will need seperate function for modal
            //}

            var revealGoat = x;
            //displays the other goat location
            while (revealGoat == x || revealGoat == carLocation) {
                revealGoat = Math.floor(Math.random() * 3);
            }

            var stringToDisplay = "You selected door: " + (x + 1) + " There is a goat at door: " + (revealGoat + 1) + " Do you want to switch doors?";
            var isKept = window.confirm(stringToDisplay);

            var doorChoice = x;
            if (isKept) { //we switch
                var remainderDoor = 5;
                remainderDoor = remainderDoor - (x + 1);
                remainderDoor = remainderDoor - (revealGoat + 1);
                doorChoice = remainderDoor;
            }

            if (Doors[0] == 0)
                document.getElementById("door0").src = goatImg;
            else
                document.getElementById("door0").src = carImg;

            if (Doors[1] == 0)
                document.getElementById("door1").src = goatImg;
            else
                document.getElementById("door1").src = carImg;

            if (Doors[2] == 0)
                document.getElementById("door2").src = goatImg;
            else
                document.getElementById("door2").src = carImg;

            updateStats(doorChoice, isKept);
            document.getElementById("buttonDoor0").disabled = true;
            document.getElementById("buttonDoor1").disabled = true;
            document.getElementById("buttonDoor2").disabled = true;
            window.alert("Door selected: " + (doorChoice + 1) + "Car was located at door: " + (carLocation + 1));
            printStatistics(gamesPlayed, gamesWon, gamesLost, switchDoorGames, switchDoors, switchDoorLost, keptDoorsGames, keptDoor, keptDoorLost);

        } //end of choose door

        function updateStats(x, isKept) {
            gamesPlayed++;
            if (isKept)
                switchDoorGames++;
            else
                keptDoorsGames++;

            if (x == carLocation) {
                gamesWon++;

                if (isKept)
                    switchDoors++;
                else
                    keptDoor++;
            } else {

                if (isKept)
                    switchDoorLost++;
                else
                    keptDoorLost++;

                gamesLost++;
            }

        } //end of update stats

        function simulateGame() {
            var switchDoor;
            var timesPlayed = document.getElementById("amountTimesToRun").value;

            switchDoor = window.confirm("Switch doors?");
            for (var i = 0; i < timesPlayed; i++) {
                playAgain();
                carLocation = Math.floor(Math.random() * 3);
                var userChoice = Math.floor(Math.random() * 3);
                var revealGoat = carLocation;

                while (revealGoat == carLocation || revealGoat == userChoice) {
                    revealGoat = Math.floor(Math.random() * 3);
                }

                if (switchDoor) {
                    var remainderDoor = 5;
                    remainderDoor = remainderDoor - (userChoice + 1);
                    remainderDoor = remainderDoor - (revealGoat + 1);
                    userChoice = remainderDoor;
                }
                updateStats(userChoice, switchDoor);

                if (i == 0) {
                    document.getElementById("buttonDoor0").disabled = false;
                    document.getElementById("buttonDoor1").disabled = false;
                    document.getElementById("buttonDoor2").disabled = false;
                    document.getElementById("door0").src = doorImg;
                    document.getElementById("door1").src = doorImg;
                    document.getElementById("door2").src = doorImg;
                }

                if (i == timesPlayed - 1) {
                    if (carLocation == 0)
                        document.getElementById("door0").src = carImg;
                    else
                        document.getElementById("door0").src = goatImg;

                    if (carLocation == 1)
                        document.getElementById("door1").src = carImg;
                    else
                        document.getElementById("door1").src = goatImg;

                    if (carLocation == 2)
                        document.getElementById("door2").src = carImg;
                    else
                        document.getElementById("door2").src = goatImg;

                    document.getElementById("buttonDoor0").disabled = true;
                    document.getElementById("buttonDoor1").disabled = true;
                    document.getElementById("buttonDoor2").disabled = true;
                }
            }//end of for loop

            printStatistics(gamesPlayed, gamesWon, gamesLost, switchDoorGames, switchDoors, switchDoorLost, keptDoorsGames, keptDoor, keptDoorLost);
        }//end of simulate game


        function resetStats() {
            gamesPlayed = 0;
            gamesWon = 0;
            gamesLost = 0;
            keptDoor = 0;
            switchDoors = 0;
            switchDoorGames = 0;
            keptDoorsGames = 0;
            keptDoorLost = 0;
            switchDoorLost = 0;

            document.getElementById("door0").src = doorImg;
            document.getElementById("door1").src = doorImg;
            document.getElementById("door2").src = doorImg;
            document.getElementById("buttonDoor0").disabled = false;
            document.getElementById("buttonDoor1").disabled = false;
            document.getElementById("buttonDoor2").disabled = false;

            printStatistics(gamesPlayed, gamesWon, gamesLost, switchDoorGames, switchDoors, switchDoorLost, keptDoorsGames, keptDoor, keptDoorLost);

        }

        function printStatistics(gamesPlayed, gamesWon, gamesLost, switchDoorGames, switchDoors, switchDoorLost, keptDoorsGames, keptDoor, keptDoorLost) {
            //*
            document.getElementById("gamesPlayed").innerHTML = "Total Games Played: " + gamesPlayed;
            if (gamesWon != 0)
                document.getElementById("gamesWon").innerHTML = "Total Games Won: " + gamesWon + " (" + (((1.0 * gamesWon) / gamesPlayed) * 100).toFixed(2) + "%)";
            else
                document.getElementById("gamesWon").innerHTML = "Total Games Won: " + gamesWon + " (0%)";

            if (gamesLost != 0)
                document.getElementById("gamesLost").innerHTML = "Total Games Lost: " + gamesLost + " (" + (((1.0 * gamesLost) / gamesPlayed) * 100).toFixed(2) + "%)";
            else
                document.getElementById("gamesLost").innerHTML = "Total Games Lost: " + gamesLost + " (0%)";




            document.getElementById("switchDoorsGames").innerHTML = "Total games where switched door: " + switchDoorGames;

            if (switchDoors != 0)
                document.getElementById("switchDoorsWon").innerHTML = "Switched doors and won: " + switchDoors + " (" + (((1.0 * switchDoors) / switchDoorGames) * 100).toFixed(2) + "%)";
            else
                document.getElementById("switchDoorsWon").innerHTML = "Switched doors and won: " + switchDoors + " (0%)";

            if (switchDoorLost != 0)
                document.getElementById("switchDoorsLose").innerHTML = "Switched doors and lost: " + switchDoorLost + " (" + (((1.0 * switchDoorLost) / switchDoorGames) * 100).toFixed(2) + "%)";
            else
                document.getElementById("switchDoorsLose").innerHTML = "Switched doors and lost: " + switchDoorLost + " (0%)";




            document.getElementById("keptDoorsGames").innerHTML = "Total Games where kept door: " + keptDoorsGames;
            if (keptDoor != 0)
                document.getElementById("keptDoorsWon").innerHTML = "Kept doors and won: " + keptDoor + " (" + (((1.0 * keptDoor) / keptDoorsGames) * 100).toFixed(2) + "%)";
            else
                document.getElementById("keptDoorsWon").innerHTML = "Kept doors and won: " + keptDoor + " (0%)";

            if (keptDoorLost != 0)
                document.getElementById("keptDoorsLose").innerHTML = "Kept doors and lost: " + keptDoorLost + " (" + (((1.0 * keptDoorLost) / keptDoorsGames) * 100).toFixed(2) + "%)";
            else
                document.getElementById("keptDoorsLose").innerHTML = "Kept doors and lost: " + keptDoorLost + " (0%)";
            // */
        }//end print stats

    </script>


</html>