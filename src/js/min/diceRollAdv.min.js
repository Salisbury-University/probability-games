const AUDIO_ROLL=new Audio("../sounds/dice_roll.mp3"),AUDIO_WRONG=new Audio("../sounds/wrong.mp3"),AUDIO_CORRECT=new Audio("../sounds/point_2.mp3"),Graphics=PIXI.Graphics,Sprite=PIXI.Sprite,weights=[1.5,2,2.5,3,3.5,4];class WindowInfo{#a;#b;constructor(){this.#a=document.querySelector(".container").getBoundingClientRect().width,this.#b=window.innerHeight}getWindowWidth(){return this.#a}getWindowHeight(){return this.#b}}class App{#c;#d;constructor(e,t){this.#c=this.#e(e),this.#d=t}#e(e){return new PIXI.Application({backgroundAlpha:0,width:e.getWindowWidth(),height:.2*e.getWindowHeight()})}appendApp(){document.getElementById(this.#d).appendChild(this.#c.view)}getApp(){return this.#c}}class DiceGame{#f;#c;#g;#h;#i;#j;#k=0;#l=0;#m=!1;constructor(){this.#h=new WindowInfo,this.#c=new App(this.#h,"app"),this.#c.getApp().loader.baseUrl="../images/",this.#c.getApp().loader.add("dice1","dice1.png").add("dice2","dice2.png").add("dice3","dice3.png").add("dice4","dice4.png").add("dice5","dice5.png").add("dice6","dice6.png"),this.#c.getApp().loader.load(),this.#g=new Sprite(this.#c.getApp().loader.resources.dice1.texture),this.#g.x=this.#h.getWindowWidth()/2-65,this.#c.getApp().stage.addChild(this.#g),this.#c.appendApp(),this.#n(),this.#o()}#o(){let t=document.getElementById("singleRoll"),i=document.getElementById("multiRoll"),l=document.querySelectorAll(".diceCard"),s=document.getElementById("weightedButton"),d=document.getElementById("notWeightedButton"),n=document.getElementById("weightSelectButton");t.addEventListener("click",()=>{this.#p(0)}),i.addEventListener("click",()=>{this.#p(1)}),l.forEach(e=>{e.addEventListener("click",()=>{this.#q(e.getAttribute("data-value"))})}),s.addEventListener("click",()=>{this.#r(!0)}),d.addEventListener("click",()=>{this.#r(!1)}),n.addEventListener("click",()=>{this.#s()})}#p(o){for(let r=1;r<=6;r++)document.getElementById(`card${r}`).classList.remove("bg-success");document.getElementById("singleRoll").disabled=!0,document.getElementById("multiRoll").disabled=!0,AUDIO_ROLL.play();let h=0,a=0;this.#c.getApp().ticker.add(()=>{h%5==0&&h<50?(a=Math.floor(6*Math.random())+1,this.#g.texture=this.#c.getApp().loader.resources[`dice${a}`].texture):50==h&&(a=this.#t(),this.#g.texture=this.#c.getApp().loader.resources[`dice${a}`].texture,this.#f[a-1]++,1==o?this.#u():document.getElementById(`card${a}`).classList.add("bg-success"),this.#v(),document.getElementById("singleRoll").disabled=!1,document.getElementById("multiRoll").disabled=!1,h++,this.#k>=10&&(document.getElementById("prompt").innerHTML="Is the dice weighted?",document.getElementById("guessButtons").hidden=!1)),h++})}#r(c){this.#j==c?(AUDIO_CORRECT.play(),document.getElementById("guessButtons").hidden=!0,this.#j?(document.getElementById("singleRoll").disabled=!0,document.getElementById("multiRoll").disabled=!0,document.getElementById("prompt").innerHTML="Correct, the dice is weighted! Now click the weighted side of the die.",this.#m=!0,this.#w()):(document.getElementById("prompt").innerHTML="Correct, the dice isn't weighted! Lets play again.",this.#n())):(AUDIO_WRONG.play(),document.getElementById("prompt").innerHTML="Try again, is the dice weighted?")}#t(){this.#k++;let g=Math.floor(121*Math.random()),p=0;for(let m=0;m<this.#i.length;m++)if(g<(p+=this.#i[m]))return m+1}#u(){let u=document.getElementById("numberRolls").value-1,y;for(let w=0;w<u;w++)y=this.#t(),this.#f[y-1]++}#v(){for(let I=0;I<6;I++)document.getElementById(`face${I+1}`).innerHTML=this.#f[I]}#w(){if(this.#m)for(let E=1;E<=6;E++)document.getElementById(`card${E}`).style.cursor="pointer";else for(let b=1;b<=6;b++)document.getElementById(`card${b}`).style.cursor="default"}#q(f){this.#m&&(f==this.#l?(AUDIO_CORRECT.play(),document.getElementById("prompt").innerHTML="Correct, the "+f+" side is the weighted side. What is the probablity that this side is obtained?",document.getElementById("guessWeight").hidden=!1):(AUDIO_WRONG.play(),document.getElementById("prompt").innerHTML="Try again, click the weighted side of the die."))}#x(){if(.5>Math.random()){let B=20*weights[Math.floor(6*Math.random())],$=Math.floor(6*Math.random());this.#i=Array(6).fill((120-B)/5),this.#i[$]=B,this.#l=$+1,this.#j=!0}else this.#j=!1,this.#i=Array(6).fill(20)}#n(){this.#f=Array(6).fill(0),this.#m=!1,this.#w(),this.#x()}#s(){let _=document.getElementById("weightSelect").value,A="";A=1.5==_?"1/4":2==_?"1/3":2.5==_?"5/12":3==_?"1/2":3.5==_?"7/12":"2/3",isNaN(_)?(AUDIO_WRONG.play(),document.getElementById("prompt").innerHTML="Please select an option from the dropdown."):20*_==this.#i[this.#l-1]?(AUDIO_CORRECT.play(),document.getElementById("prompt").innerHTML="Correct, the "+this.#l+" side has a "+A+" chance of being obtained. Let's play again.",document.getElementById("guessWeight").hidden=!0,document.getElementById("singleRoll").disabled=!1,document.getElementById("multiRoll").disabled=!1,this.#n()):(AUDIO_WRONG.play(),document.getElementById("prompt").innerHTML="Try again, what is the probablity that the "+this.#l+" side is obtained?")}}class ScreenManagement{#y;#z;constructor(){this.#y=document.getElementById("themeTypeSwitch"),this.#z=document.getElementById("volume-control");"dark"==sessionStorage.getItem("theme")&&(document.getElementById("themeTypeSwitch").checked=!0,this.#A()),this.#B()}#B(){this.#y.addEventListener("click",()=>{this.#A()}),this.#z.addEventListener("input",()=>{this.#C()})}#C(){AUDIO_CORRECT.volume=this.#z.currentTarget.value/100,AUDIO_WRONG.volume=this.#z.currentTarget.value/100,AUDIO_ROLL.volume=this.#z.currentTarget.value/100}#A(){let R=document.querySelectorAll(".text"),L=document.querySelectorAll(".menu");if(this.#y.checked){document.body.style.backgroundColor="#343a40";for(let O=0;O<R.length;O++)R[O].style.color="white";for(let T=0;T<L.length;T++)L[T].style.backgroundColor="#343a40";sessionStorage.setItem("theme","dark")}else{document.body.style.backgroundColor="#ffffff";for(let C=0;C<R.length;C++)R[C].style.color="black";for(let v=0;v<L.length;v++)L[v].style.backgroundColor="#ffffff";sessionStorage.setItem("theme","light")}}}const screen=new ScreenManagement,game=new DiceGame;