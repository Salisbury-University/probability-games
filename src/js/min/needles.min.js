let windowWidth=.8*document.body.clientWidth,windowHeight=.53*window.innerHeight,pi=0,amountLines=7,lineSpace=windowHeight/amountLines;const halfPi=Math.PI/2;let app=new PIXI.Application({view:document.getElementById("app").appendChild(document.createElement("canvas")),backgroundColor:3289137,width:windowWidth,height:windowHeight});const bgContainer=new PIXI.Container;app.stage.addChild(bgContainer);let bg1=new PIXI.Graphics;bg1.beginFill(16766857),bg1.drawRect(.9*windowWidth,0,app.view.width,app.view.height),bg1.endFill(),bgContainer.addChild(bg1);let labelColor="#000000",style=new PIXI.TextStyle({fontFamily:"Arial",fontSize:lineSpace,fill:labelColor}),basicText=new PIXI.Text,basicTextArray=[];window.addEventListener("resize",function(){app.renderer.resize(.8*document.body.clientWidth,.53*window.innerHeight)}),document.getElementById("app").appendChild(app.view),document.getElementById("amountOfNeedles").addEventListener("keydown",function(e){"Enter"===e.code&&needleXY()});let line=new PIXI.Graphics,lines=[],needles=[],nextEmpty=0,needleCross=0,needleDrop=0,needleColor=16777215,dropTypeValue="Singular";var needleDropSound=new Audio("../sounds/needleDrop.mp3");let lineInArray=new PIXI.Graphics,lineArray=[],needleLengthPercent=.9,needleLength=lineSpace*needleLengthPercent,yValue=0;needleDropSound.volume=.5,window.onload=function(){let e=document.getElementById("volume-control");"dark"==sessionStorage.getItem("theme")&&(document.getElementById("themeTypeSwitch").checked=!0,changeDarkTheme()),e.addEventListener("input",function(e){needleDropSound.volume=e.currentTarget.value/100}),document.getElementsByClassName("estimation")[0].innerHTML="PI Estimation: ",document.getElementsByClassName("estimation")[1].innerHTML=" ",document.getElementById("realPi").innerHTML="Rounded value of PI : "+Math.round(1e4*Math.PI)/1e4,document.getElementsByClassName("needLength")[0].innerHTML=Math.round(10*needleLength)/10+" Units",document.getElementsByClassName("needLength")[1].innerHTML=Math.round(10*needleLength)/10,document.getElementsByClassName("gridSpace")[0].innerHTML=Math.round(10*lineSpace)/10+" Units",document.getElementsByClassName("gridSpace")[1].innerHTML=Math.round(10*lineSpace)/10,document.getElementsByClassName("needCross")[0].innerHTML="# of Needles Crossing a Line(Green): 0",document.getElementsByClassName("needCross")[1].innerHTML=0,document.getElementsByClassName("needCross")[2].innerHTML=0,document.getElementById("needleDontCross").innerHTML="# of Needles Not Crossing a Line(Purple): 0",document.getElementsByClassName("total")[0].innerHTML="Total # of Needles Dropped: 0",document.getElementsByClassName("total")[1].innerHTML=0,document.getElementsByClassName("total")[2].innerHTML=0,document.getElementById("percentError").innerHTML="Percent Error for PI estimaton: "},document.getElementById("disableSound").addEventListener("click",function(){this.checked?needleDropSound.muted=!0:needleDropSound.muted=!1});for(let i=0;i<amountLines+1;i++)0==i||i==amountLines?line.lineStyle(3,38655):line.lineStyle(1,38655,1),line.moveTo(0,yValue),line.lineTo(.9*windowWidth,yValue),line.closePath(),app.stage.addChild(line),lines[i]=yValue,yValue+=lineSpace;function changeTheme(){document.getElementById("themeTypeSwitch").checked?changeDarkTheme():changeLightTheme()}function changeDarkTheme(){bg1.destroy(),(bg1=new PIXI.Graphics).beginFill(2500134),bg1.drawRect(.9*windowWidth,0,app.view.width,app.view.height),bg1.endFill(),bgContainer.addChild(bg1);document.querySelectorAll("#topPageSection").forEach(e=>{e.style.backgroundColor="#313b4b",e.style.color="white"}),document.getElementById("canvasArea").style.backgroundColor="#262626",document.body.style.backgroundColor="#313b4b",labelColor="0xffffff",style.fill=16777215,style.fontSize=lineSpace,(basicText=new PIXI.Text("}d",style)).x=.91*windowWidth,basicText.y=lines[0]-.15*lineSpace,app.stage.addChild(basicText),basicTextArray.push(basicText);let e=document.querySelectorAll(".menu"),n=document.querySelectorAll(".text");for(let t=0;t<n.length;t++)n[t].style.color="white";for(let l=0;l<e.length;l++)e[l].style.backgroundColor="#343a40";sessionStorage.setItem("theme","dark")}function changeLightTheme(){bg1.destroy(),(bg1=new PIXI.Graphics).beginFill(16766857),bg1.drawRect(.9*windowWidth,0,app.view.width,app.view.height),bg1.endFill(),bgContainer.addChild(bg1);document.querySelectorAll("#topPageSection").forEach(e=>{e.style.backgroundColor="#FFEDC9",e.style.color="black"}),document.getElementById("canvasArea").style.backgroundColor="#ffd789",bg1.fill.color=16766857,document.body.style.backgroundColor="#FFEDC9",labelColor="0x000000",style.fill=0,style.fontSize=lineSpace,(basicText=new PIXI.Text("}d",style)).x=.91*windowWidth,basicText.y=lines[0]-.15*lineSpace,app.stage.addChild(basicText),basicTextArray.push(basicText);let e=document.querySelectorAll(".menu"),n=document.querySelectorAll(".text");for(let t=0;t<n.length;t++)n[t].style.color="black";for(let l=0;l<e.length;l++)e[l].style.backgroundColor="#ffffff";sessionStorage.setItem("theme","light")}function changeLines(e){if(9==amountLines&&1==e)alert("Can not go over ten lines");else if(1==amountLines&&-1==e)alert("Cannot go lower then two lines");else{amountLines+=e,document.getElementById("displayNumberGridLines").innerHTML=amountLines+1,clearNeedles(),line.destroy();for(let n=0;n<basicTextArray.length;n++)basicTextArray[n].destroy();lines=[],line=new PIXI.Graphics,basicTextArray=[],needleLength=.9*(lineSpace=windowHeight/amountLines),yValue=0;for(let t=0;t<amountLines+1;t++)0==t||t==amountLines?line.lineStyle(3,38655,1):line.lineStyle(1,38655,1),line.moveTo(0,yValue),line.lineTo(.9*windowWidth,yValue),line.closePath(),app.stage.addChild(line),lines[t]=yValue,yValue+=lineSpace;amountLines>=3&&(style.fontSize=lineSpace,(basicText=new PIXI.Text("}d",style)).x=.91*windowWidth,basicText.y=lines[0]-.15*lineSpace,app.stage.addChild(basicText),basicTextArray.push(basicText))}}function guessingPIfunc(){document.getElementById("resultArea").removeAttribute("hidden"),document.getElementById("guessingPI").setAttribute("hidden","hidden"),document.getElementById("guessPIButton").setAttribute("hidden","hidden"),document.getElementById("continueButton").removeAttribute("hidden")}(basicText=new PIXI.Text("}d",style)).x=.91*windowWidth,basicText.y=lines[0]-10,app.stage.addChild(basicText),basicTextArray.push(basicText);const buttons=document.querySelectorAll(".statsSection");function needleXY(){let e=document.getElementById("amountOfNeedles").value;if(e>5e4)alert("Please enter 50,000 Needles or less");else if(e<=0)alert("Please enter 1 or more Needles");else{document.getElementById("guessPIButton").removeAttribute("disabled"),"Singular"==dropTypeValue&&clearNeedles();let n,t,l,a,s,r;for(let d=0;d<e;d++){do n=Math.random()*windowWidth*.88;while(n<needleLength||n>.88*windowWidth-needleLength/2);let o=lines[lines.length-1],$=lines[0];t=Math.floor(Math.random()*(o-$))+$,needleDrop++;let g=Math.floor(360*Math.random());a=needleLength*Math.sin(g=toRadians(g)),s=n+(l=needleLength*Math.cos(g)),r=t+a;for(let c=0;c<lines.length;c++)r<=lines[c]&&t<=lines[c]||r>=lines[c]&&t>=lines[c]?lineInArray.lineStyle(1,16449787,1):(lineInArray.lineStyle(1,256952440,1),needleCross++,c=lines.length),lineInArray.moveTo(n,t),lineInArray.lineTo(s,r),lineInArray.closePath(),app.stage.addChild(lineInArray),lineArray.push(lineInArray)}playAudio();let m=100*Math.abs(((pi=2*needleLength/(lineSpace*(needleCross/needleDrop)))-Math.PI)/Math.PI);document.getElementsByClassName("estimation")[0].innerHTML="PI Estimation: "+Math.round(1e4*pi)/1e4,document.getElementsByClassName("estimation")[1].innerHTML=Math.round(1e4*pi)/1e4,document.getElementById("realPi").innerHTML="Rounded value of PI : "+Math.round(1e4*Math.PI)/1e4,document.getElementsByClassName("needLength")[0].innerHTML=Math.round(10*needleLength)/10+" Units",document.getElementsByClassName("needLength")[1].innerHTML=Math.round(10*needleLength)/10,document.getElementsByClassName("gridSpace")[0].innerHTML=Math.round(10*lineSpace)/10+" Units",document.getElementsByClassName("gridSpace")[1].innerHTML=Math.round(10*lineSpace)/10,document.getElementsByClassName("needCross")[0].innerHTML="# of Needles that Cross a Line(Green): "+needleCross,document.getElementsByClassName("needCross")[1].innerHTML=needleCross,document.getElementsByClassName("needCross")[2].innerHTML=needleCross,document.getElementById("needleDontCross").innerHTML="# of Needles that Don't Cross a Line(Purple): "+(needleDrop-needleCross),document.getElementsByClassName("total")[0].innerHTML="Total # of Needles Dropped: "+needleDrop,document.getElementsByClassName("total")[1].innerHTML=needleDrop,document.getElementsByClassName("total")[2].innerHTML=needleDrop,document.getElementById("percentError").innerHTML="Percent Error for PI estimaton: "+Math.round(1e4*m)/1e4+"%"}}function toRadians(e){return e*(Math.PI/180)}function changeNeedleLength(e){needleLength=lineSpace*(needleLengthPercent=e),clearNeedles()}function playAudio(){needleDropSound.pause(),needleDropSound.currentTime=1.6,needleDropSound.play()}function clearNeedles(){neg=0,pos=0,document.getElementsByClassName("estimation")[0].innerHTML="PI Estimation: ",document.getElementsByClassName("estimation")[1].innerHTML=" ",document.getElementById("realPi").innerHTML="Rounded value of PI : "+Math.round(1e4*Math.PI)/1e4,document.getElementsByClassName("needLength")[0].innerHTML=Math.round(10*needleLength)/10+" Units",document.getElementsByClassName("needLength")[1].innerHTML=Math.round(10*needleLength)/10,document.getElementsByClassName("gridSpace")[0].innerHTML=Math.round(10*lineSpace)/10+" Units",document.getElementsByClassName("gridSpace")[1].innerHTML=Math.round(10*lineSpace)/10,document.getElementsByClassName("needCross")[0].innerHTML="# of Needles that Cross a Line(Green): 0",document.getElementsByClassName("needCross")[1].innerHTML=0,document.getElementsByClassName("needCross")[2].innerHTML=0,document.getElementById("needleDontCross").innerHTML="# of Needles that Don't Cross a Line(Purple): 0",document.getElementsByClassName("total")[0].innerHTML="Total # of Needles Dropped: 0",document.getElementsByClassName("total")[1].innerHTML=0,document.getElementsByClassName("total")[2].innerHTML=0,document.getElementById("percentError").innerHTML="Percent Error for PI estimaton: ",lineArray.forEach(e=>{app.stage.removeChild(e)}),lineInArray.destroy(),lineInArray=new PIXI.Graphics,lineArray.splice(0,lineArray.length),needleCross=0,needleDrop=0}buttons[0].addEventListener("click",()=>{buttons[0].hidden=!0,buttons[1].hidden=!1,document.getElementById("topPageSection").hidden=!0,document.getElementById("moreInfo").hidden=!1,document.getElementById("stats").hidden=!0}),buttons[1].addEventListener("click",()=>{buttons[1].hidden=!0,buttons[0].hidden=!1,document.getElementById("moreInfo").hidden=!0,document.getElementById("stats").hidden=!1,document.getElementById("topPageSection").hidden=!1}),document.querySelectorAll(".dropdown-percent").forEach(e=>{e.addEventListener("click",()=>{let n=e.dataset.percent,t=document.getElementById("percentDropdown"),l=t.textContent.replace("%","");t.textContent=n+"%",document.getElementById(n).hidden=!0,document.getElementById(l).hidden=!1,changeNeedleLength(n/=100)})}),document.getElementById("singular").addEventListener("click",()=>{"Cumulative"==dropTypeValue&&(dropTypeValue="Singular",clearNeedles())}),document.getElementById("cumulative").addEventListener("click",()=>{"Singular"==dropTypeValue&&(dropTypeValue="Cumulative",clearNeedles())});let themeCheck=sessionStorage.getItem("theme");"dark"==themeCheck&&(document.getElementById("themeTypeSwitch").checked=!0,changeDarkTheme());class themeManagement{}