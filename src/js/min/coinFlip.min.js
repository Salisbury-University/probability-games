const AUDIO_FLIP=new Audio("../sounds/coin_flip.mp3"),AUDIO_WRONG=new Audio("../sounds/wrong.mp3"),AUDIO_CORRECT=new Audio("../sounds/point_2.mp3"),Graphics=PIXI.Graphics,Sprite=PIXI.Sprite,possibleWeights=[90,75,60],imageNames=["coin","penny","nickel","dime"];class WindowInfo{#a;#b;constructor(){this.#a=document.querySelector(".container").getBoundingClientRect().width,this.#b=window.innerHeight}getWindowWidth(){return this.#a}getWindowHeight(){return this.#b}}class App{#c;#d;constructor(e,t){this.#c=this.#e(e),this.#d=t}#e(e){return new PIXI.Application({backgroundAlpha:0,width:e.getWindowWidth(),height:.2*e.getWindowHeight()})}appendApp(){document.getElementById(this.#d).appendChild(this.#c.view)}getApp(){return this.#c}}class CoinGame{#f=0;#g;#h;#c;#i;#j;#k="coin";constructor(){this.#h=new WindowInfo,this.#c=new App(this.#h,"app"),this.#c.getApp().loader.baseUrl="../images/",this.#c.getApp().loader.add("coin0","coinHead.png").add("coin1","coinTail.png").add("penny0","pennyHead.png").add("penny1","pennyTail.png").add("nickel0","nickelHead.png").add("nickel1","nickelTail.png").add("dime0","dimeHead.png").add("dime1","dimeTail.png"),this.#c.getApp().loader.load(),this.#i=new Sprite(this.#c.getApp().loader.resources.coin0.texture),this.#i.x=this.#h.getWindowWidth()/2-65,this.#c.getApp().stage.addChild(this.#i),this.#c.appendApp(),this.#l(),this.#m()}#l(){this.#g=[,,].fill(0),this.#f=0,this.#n()}#m(){let t=document.getElementById("singleFlip"),i=document.getElementById("multiFlip"),n=document.getElementById("weighted"),l=document.getElementById("notWeighted"),s=document.getElementById("weightSelectButton"),d=document.getElementById("numberFlips"),o=document.getElementById("coin-dropdown"),r=document.querySelectorAll(".dropdown-item");t.addEventListener("click",()=>{this.#o(0)}),i.addEventListener("click",()=>{this.#o(1)}),n.addEventListener("click",()=>{this.#p(0)}),l.addEventListener("click",()=>{this.#p(1)}),s.addEventListener("click",()=>{this.#q()}),d.addEventListener("keypress",function(e){let t=e.key;(t<"0"||t>"9")&&e.preventDefault()}),r.forEach(e=>{e.addEventListener("click",()=>{let t=e.dataset.coin,i=o.textContent;o.textContent=t,document.getElementById(t).hidden=!0,document.getElementById(i).hidden=!1,this.#r(t),o.click()})})}#r(a){a=a.toLowerCase(),this.#k=a,this.#i.texture=this.#c.getApp().loader.resources[`${this.#k}0`].texture,document.getElementById("headCard").src=`../images/${a}Head.png`,document.getElementById("tailCard").src=`../images/${a}Tail.png`}#n(){if(.5>Math.random()){let p=possibleWeights[Math.floor(3*Math.random())];this.#j=[,,].fill(100-p),this.#j[Math.floor(2*Math.random())]=p}else this.#j=[,,].fill(50)}#s(h){}#t(){document.getElementById("head").innerHTML=this.#g[0],document.getElementById("tail").innerHTML=this.#g[1]}#u(){return this.#f++,Math.floor(101*Math.random())<=this.#j[0]?0:1}#v(){let g=document.getElementById("numberFlips").value-1;for(let c=0;c<g;c++)this.#g[this.#u()]++}#o(m){document.getElementById("card0").classList.remove("bg-success"),document.getElementById("card1").classList.remove("bg-success"),document.getElementById("singleFlip").disabled=!0,document.getElementById("multiFlip").disabled=!0,AUDIO_FLIP.play();let u=0,y=0;this.#c.getApp().ticker.add(()=>{u%5==0&&u<50?(y=0===y?1:0,this.#i.texture=this.#c.getApp().loader.resources[`${this.#k}${y}`].texture):50==u&&(y=this.#u(),this.#i.texture=this.#c.getApp().loader.resources[`${this.#k}${y}`].texture,this.#g[y]++,1==m?this.#v():document.getElementById(`card${y}`).classList.add("bg-success"),this.#t(),document.getElementById("singleFlip").disabled=!1,document.getElementById("multiFlip").disabled=!1,u++,this.#f>=10&&(document.getElementById("prompt").innerHTML="Is the Coin Weighted?",document.getElementById("guessButtons").hidden=!1)),u++})}#p(I){0==I&&50!=this.#j[0]?(AUDIO_CORRECT.play(),document.getElementById("prompt").innerHTML="Correct the coin is weighted.",document.getElementById("guessButtons").hidden=!0,document.getElementById("guessWeight").hidden=!1,document.getElementById("singleFlip").disabled=!0,document.getElementById("multiFlip").disabled=!0):1==I&&50==this.#j[0]?(AUDIO_CORRECT.play(),document.getElementById("prompt").innerHTML="Correct the coin is not weighted.",document.getElementById("guessButtons").hidden=!0,this.#l()):(AUDIO_WRONG.play(),document.getElementById("prompt").innerHTML="Try again, is the coin weighted?")}#q(){let $=document.getElementById("weightSelect").value;console.log($),isNaN($)?(AUDIO_WRONG.play(),document.getElementById("prompt").innerHTML="Please select an option from the dropdown."):$==this.#j[0]?(AUDIO_CORRECT.play(),document.getElementById("prompt").innerHTML="Correct the weight is "+this.#j[0]+"% Heads and "+this.#j[1]+"% Tails",document.getElementById("guessWeight").hidden=!0,document.getElementById("singleFlip").disabled=!1,document.getElementById("multiFlip").disabled=!1,this.#l()):(AUDIO_WRONG.play(),document.getElementById("prompt").innerHTML="Try again, what is the weight of the coin?")}}class ScreenManagement{#w;#x;constructor(){this.#w=document.getElementById("themeTypeSwitch"),this.#x=document.getElementById("volume-control");"dark"==sessionStorage.getItem("theme")&&(document.getElementById("themeTypeSwitch").checked=!0,this.#y()),this.#z()}#z(){this.#w.addEventListener("click",()=>{this.#y()}),this.#x.addEventListener("input",()=>{this.#A()})}#A(){AUDIO_CORRECT.volume=this.#x.currentTarget.value/100,AUDIO_WRONG.volume=this.#x.currentTarget.value/100,AUDIO_ROLL.volume=this.#x.currentTarget.value/100}#y(){let E=document.querySelectorAll(".text"),w=document.querySelectorAll(".menu");if(this.#w.checked){document.body.style.backgroundColor="#343a40";for(let b=0;b<E.length;b++)E[b].style.color="white";for(let B=0;B<w.length;B++)w[B].style.backgroundColor="#343a40";sessionStorage.setItem("theme","dark")}else{document.body.style.backgroundColor="#ffffff";for(let C=0;C<E.length;C++)E[C].style.color="black";for(let f=0;f<w.length;f++)w[f].style.backgroundColor="#ffffff";sessionStorage.setItem("theme","light")}}}const screen=new ScreenManagement,game=new CoinGame;