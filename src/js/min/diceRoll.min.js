const AUDIO_ROLL=new Audio("../sounds/dice_roll.mp3"),AUDIO_WRONG=new Audio("../sounds/wrong.mp3"),AUDIO_CORRECT=new Audio("../sounds/point_2.mp3"),Graphics=PIXI.Graphics,Sprite=PIXI.Sprite;class WindowInfo{#a;#b;constructor(){this.#a=document.querySelector(".container").getBoundingClientRect().width,this.#b=window.innerHeight}getWindowWidth(){return this.#a}getWindowHeight(){return this.#b}}class App{#c;#d;constructor(e,t){this.#c=this.#e(e),this.#d=t}#e(e){return new PIXI.Application({backgroundAlpha:0,width:e.getWindowWidth(),height:.2*e.getWindowHeight()})}appendApp(){document.getElementById(this.#d).appendChild(this.#c.view)}getApp(){return this.#c}}class DiceGame{#f;#c;#g;#h;#i;#j;#k=0;#l=0;#m=!1;constructor(){this.#h=new WindowInfo,this.#c=new App(this.#h,"app"),this.#c.getApp().loader.baseUrl="../images/",this.#c.getApp().loader.add("dice1","dice1.png").add("dice2","dice2.png").add("dice3","dice3.png").add("dice4","dice4.png").add("dice5","dice5.png").add("dice6","dice6.png"),this.#c.getApp().loader.load(),this.#g=new Sprite(this.#c.getApp().loader.resources.dice1.texture),this.#g.x=this.#h.getWindowWidth()/2-65,this.#c.getApp().stage.addChild(this.#g),this.#c.appendApp(),this.#n(),this.#o()}#o(){let t=document.getElementById("singleRoll"),i=document.getElementById("multiRoll"),l=document.querySelectorAll(".diceCard"),s=document.getElementById("weightedButton"),d=document.getElementById("notWeightedButton");t.addEventListener("click",()=>{this.#p(0)}),i.addEventListener("click",()=>{this.#p(1)}),l.forEach(e=>{e.addEventListener("click",()=>{this.#q(e.getAttribute("data-value"))})}),s.addEventListener("click",()=>{this.#r(!0)}),d.addEventListener("click",()=>{this.#r(!1)})}#p(n){for(let r=1;r<=6;r++)document.getElementById(`card${r}`).classList.remove("bg-success");document.getElementById("singleRoll").disabled=!0,document.getElementById("multiRoll").disabled=!0,AUDIO_ROLL.play();let o=0,a=0;this.#c.getApp().ticker.add(()=>{o%5==0&&o<50?(a=Math.floor(6*Math.random())+1,this.#g.texture=this.#c.getApp().loader.resources[`dice${a}`].texture):50==o&&(a=this.#s(),this.#g.texture=this.#c.getApp().loader.resources[`dice${a}`].texture,this.#f[a-1]++,1==n?this.#t():document.getElementById(`card${a}`).classList.add("bg-success"),this.#u(),document.getElementById("singleRoll").disabled=!1,document.getElementById("multiRoll").disabled=!1,o++,this.#k>=10&&(document.getElementById("prompt").innerHTML="Is the dice weighted?",document.getElementById("guessButtons").hidden=!1)),o++})}#r(h){this.#j==h?(AUDIO_CORRECT.play(),document.getElementById("guessButtons").hidden=!0,this.#j?(document.getElementById("singleRoll").disabled=!0,document.getElementById("multiRoll").disabled=!0,document.getElementById("prompt").innerHTML="Correct, the dice is weighted! Now click the weighted side of the die.",this.#m=!0,this.#v()):(document.getElementById("prompt").innerHTML="Correct, the dice isn't weighted! Lets play again.",this.#n())):(AUDIO_WRONG.play(),document.getElementById("prompt").innerHTML="Try again, is the dice weighted?")}#s(){this.#k++;let c=Math.random(),g=0;for(let p=0;p<this.#i.length;p++)if(c<(g+=this.#i[p]))return p+1}#t(){let m=document.getElementById("numberRolls").value-1,u;for(let y=0;y<m;y++)u=this.#s(),this.#f[u-1]++}#u(){for(let w=0;w<6;w++)document.getElementById(`face${w+1}`).innerHTML=this.#f[w]}#v(){if(this.#m)for(let I=1;I<=6;I++)document.getElementById(`card${I}`).style.cursor="pointer";else for(let f=1;f<=6;f++)document.getElementById(`card${f}`).style.cursor="default"}#q(E){this.#m&&(E==this.#l?(AUDIO_CORRECT.play(),document.getElementById("prompt").innerHTML="Correct, the "+E+" side is the weighted side. Let's play again.",this.#n()):(AUDIO_WRONG.play(),document.getElementById("prompt").innerHTML="Try again, click the weighted side of the die."))}#w(){if(.5>Math.random()){let b=Math.floor(6*Math.random());this.#i=Array(6).fill(2/15),this.#i[b]=1/3,this.#l=b+1,this.#j=!0}else this.#j=!1,this.#i=Array(6).fill(1/6)}#n(){this.#f=Array(6).fill(0),this.#m=!1,this.#v(),this.#w(),document.getElementById("singleRoll").disabled=!1,document.getElementById("multiRoll").disabled=!1}}class ScreenManagement{#x;#y;constructor(){this.#x=document.getElementById("themeTypeSwitch"),this.#y=document.getElementById("volume-control");"dark"==sessionStorage.getItem("theme")&&(document.getElementById("themeTypeSwitch").checked=!0,this.#z()),this.#A()}#A(){this.#x.addEventListener("click",()=>{this.#z()}),this.#y.addEventListener("input",()=>{this.#B()})}#B(){AUDIO_CORRECT.volume=this.#y.currentTarget.value/100,AUDIO_WRONG.volume=this.#y.currentTarget.value/100,AUDIO_ROLL.volume=this.#y.currentTarget.value/100}#z(){let $=document.querySelectorAll(".text"),B=document.querySelectorAll(".menu");if(this.#x.checked){document.body.style.backgroundColor="#343a40";for(let A=0;A<$.length;A++)$[A].style.color="white";for(let _=0;_<B.length;_++)B[_].style.backgroundColor="#343a40";sessionStorage.setItem("theme","dark")}else{document.body.style.backgroundColor="#ffffff";for(let R=0;R<$.length;R++)$[R].style.color="black";for(let v=0;v<B.length;v++)B[v].style.backgroundColor="#ffffff";sessionStorage.setItem("theme","light")}}}const screen=new ScreenManagement,game=new DiceGame;